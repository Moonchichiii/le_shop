{% extends "base.html" %}
{% load i18n %}

{% block title %}Settings | Art Leptis{% endblock %}

{% block content %}
<section class="artleptis">
  <div class="mx-auto max-w-2xl px-4 sm:px-6 py-section-sm">

    <div class="reveal-up">
      <span class="label">Account</span>
      <h1 class="headline-serif mt-3 text-4xl">Settings</h1>
    </div>

    {# ── Profile card ── #}
    <div
      class="mt-8 bg-surface shadow-sm p-6 sm:p-8 reveal-up"
      style="border-radius: var(--radius-lg)"
    >
      <h2 class="text-sm font-semibold text-ink-40 uppercase tracking-widest mb-5">
        Profile
      </h2>

      <form method="post" action="{% url 'accounts:settings' %}" class="space-y-5">
        {% csrf_token %}

        {# Read-only email #}
        <div>
          <label class="block text-sm font-medium text-ink-60 mb-1.5">
            Email
          </label>
          <input
            type="email"
            value="{{ request.user.email }}"
            disabled
            class="w-full px-3 py-2.5 bg-cream/60 text-ink-40
                   border border-rule text-sm cursor-not-allowed"
            style="border-radius: var(--radius-md)"
          />
          <p class="mt-1 text-xs text-ink-40">
            <a href="{% url 'accounts:email-change' %}"
               class="underline hover:text-ink transition-colors">
              Change email
            </a>
          </p>
        </div>

        {# Read-only name from allauth #}
        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
          <div>
            <label class="block text-sm font-medium text-ink-60 mb-1.5">
              First name
            </label>
            <input
              type="text"
              value="{{ request.user.first_name }}"
              disabled
              class="w-full px-3 py-2.5 bg-cream/60 text-ink-40
                     border border-rule text-sm cursor-not-allowed"
              style="border-radius: var(--radius-md)"
            />
          </div>
          <div>
            <label class="block text-sm font-medium text-ink-60 mb-1.5">
              Last name
            </label>
            <input
              type="text"
              value="{{ request.user.last_name }}"
              disabled
              class="w-full px-3 py-2.5 bg-cream/60 text-ink-40
                     border border-rule text-sm cursor-not-allowed"
              style="border-radius: var(--radius-md)"
            />
          </div>
        </div>

        {# Editable phone #}
        <div>
          <label
            class="block text-sm font-medium text-ink-60 mb-1.5"
            for="{{ profile_form.phone.id_for_label }}"
          >
            Phone
          </label>
          {{ profile_form.phone }}
          {% if profile_form.phone.errors %}
            <p class="mt-1 text-xs text-red-600">
              {{ profile_form.phone.errors.0 }}
            </p>
          {% endif %}
        </div>

        <button type="submit" class="btn-primary">Save changes</button>
      </form>
    </div>

    {# ── Quick links ── #}
    <div
      class="mt-6 bg-surface shadow-sm p-6 sm:p-8 reveal-up"
      style="border-radius: var(--radius-lg)"
    >
      <h2 class="text-sm font-semibold text-ink-40 uppercase tracking-widest mb-5">
        Manage
      </h2>
      <div class="space-y-3">
        <a href="{% url 'accounts:address-list' %}"
           class="flex items-center justify-between group py-2">
          <span class="text-sm font-medium text-ink group-hover:text-blue-700 transition-colors">
            Addresses
          </span>
          <svg class="w-4 h-4 text-ink-40 group-hover:translate-x-0.5 transition-transform"
               fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 4.5l7.5 7.5-7.5 7.5"/>
          </svg>
        </a>

        <div class="border-t border-rule"></div>

        <a href="{% url 'accounts:email-change' %}"
           class="flex items-center justify-between group py-2">
          <span class="text-sm font-medium text-ink group-hover:text-blue-700 transition-colors">
            Change email
          </span>
          <svg class="w-4 h-4 text-ink-40 group-hover:translate-x-0.5 transition-transform"
               fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 4.5l7.5 7.5-7.5 7.5"/>
          </svg>
        </a>

        <div class="border-t border-rule"></div>

        <a href="{% url 'accounts:danger-zone' %}"
           class="flex items-center justify-between group py-2">
          <span class="text-sm font-medium text-red-600 group-hover:text-red-700 transition-colors">
            Delete account
          </span>
          <svg class="w-4 h-4 text-red-400 group-hover:translate-x-0.5 transition-transform"
               fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 4.5l7.5 7.5-7.5 7.5"/>
          </svg>
        </a>
      </div>
    </div>

  </div>
</section>
{% endblock %}