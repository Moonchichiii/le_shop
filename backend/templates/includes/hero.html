{% load i18n static %}

<section
  class="relative bg-paper"
  aria-label="{% trans 'Featured collection' %}"
>
  {# HERO CONTENT GRID #}
  <div class="px-6 md:px-12 lg:px-20 pt-10 md:pt-20 lg:pt-28">
    <p class="label reveal-up">
      {% trans "Leptis Minor / Handmade Objects" %}
    </p>

    <h1 class="hero-title mt-6 reveal-up">
      {% trans "Sculpted by" %}<br>
      <span class="hero-title-muted">{% trans "Time & Sea." %}</span>
    </h1>
  </div>

  {# IMAGE + COPY GRID #}
  <div class="mt-10 md:mt-16 px-6 md:px-12 lg:px-20">
    <div class="grid grid-cols-1 lg:grid-cols-12 gap-8 lg:gap-6 items-end">

      {# ── Image: 8 cols ── #}
      <div class="lg:col-span-8 relative">
        <div
          id="hero-carousel"
          class="plate relative w-full overflow-hidden bg-mist
                 cursor-grab active:cursor-grabbing touch-none reveal-scale"
        >
          <div class="relative aspect-[4/5] md:aspect-[16/10]">
            {% if hero_slides %}
              {% for slide in hero_slides %}
                <div
                  class="hero-slide absolute inset-0 h-full w-full bg-mist
                         {% if forloop.first %}z-10 opacity-100 visible{% else %}opacity-0 invisible{% endif %}"
                  data-caption="{{ slide.title|default:slide.alt_text }}"
                >
                  <img
                    src="{{ slide.image_url }}"
                    alt="{{ slide.alt_text }}"
                    class="h-full w-full object-cover object-center"
                    width="1400"
                    height="1750"
                    loading="{% if forloop.first %}eager{% else %}lazy{% endif %}"
                    decoding="{% if forloop.first %}sync{% else %}async{% endif %}"
                    fetchpriority="{% if forloop.first %}high{% else %}auto{% endif %}"
                  >
                </div>
              {% endfor %}

              {# Slide controls — bottom-left inside image #}
              {% if hero_slides|length > 1 %}
                <div
                  id="hero-controls"
                  class="absolute bottom-4 left-4 flex items-center gap-3 z-20"
                >
                  <button
                    data-hero="prev"
                    class="tap-44 flex items-center justify-center
                           bg-paper/90 border border-rule"
                    aria-label="{% trans 'Previous slide' %}"
                  >
                    <svg width="16" height="16" viewBox="0 0 16 16"
                         fill="none" stroke="currentColor" stroke-width="1.5">
                      <path d="M10 3L5 8l5 5"/>
                    </svg>
                  </button>

                  <span
                    id="hero-counter"
                    class="text-meta text-ink-60 tabular-nums"
                  >
                    1 / {{ hero_slides|length }}
                  </span>

                  <button
                    data-hero="next"
                    class="tap-44 flex items-center justify-center
                           bg-paper/90 border border-rule"
                    aria-label="{% trans 'Next slide' %}"
                  >
                    <svg width="16" height="16" viewBox="0 0 16 16"
                         fill="none" stroke="currentColor" stroke-width="1.5">
                      <path d="M6 3l5 5-5 5"/>
                    </svg>
                  </button>
                </div>
              {% endif %}

            {% else %}
              <div class="absolute inset-0 flex items-center justify-center
                          bg-mist text-ink-60">
                <p class="text-sm tracking-wide">
                  {% trans "No slides active" %}
                </p>
              </div>
            {% endif %}
          </div>
        </div>
      </div>

      {# ── Copy: 4 cols ── #}
      <div class="lg:col-span-4 flex flex-col justify-end gap-8 pb-2 reveal-up">
        <p class="hero-copy">
          {% trans "Unique lamps and objects crafted from driftwood and stone — modern forms, old-world patience." %}
        </p>

        {# CTA row #}
        <div class="flex flex-col sm:flex-row gap-3">
          <a href="{% url 'product_list' %}" class="btn-primary">
            {% trans "Explore Collection" %}
          </a>
          <a href="#story" class="btn-outline">
            {% trans "Our Process" %}
          </a>
        </div>

        {# Slide caption #}
        {% if hero_slides %}
          <div class="border-t border-rule pt-4 mt-2">
            <span class="hero-caption__label">
              {% trans "Now Showing" %}
            </span>
            <span id="hero-caption-text" class="hero-caption__value">
              {{ hero_slides.0.title }}
            </span>
          </div>
        {% endif %}
      </div>

    </div>
  </div>

  {# Bottom spacer #}
  <div class="h-16 md:h-24 lg:h-32"></div>
</section>

{# MARQUEE BAND #}
<div class="marquee" aria-hidden="true">
  <div class="marquee__track">
    {% for _ in "123456" %}
      <span class="marquee__text">{% trans "Driftwood" %}</span>
      <span class="marquee__separator"></span>
      <span class="marquee__text">{% trans "Sculpture" %}</span>
      <span class="marquee__separator"></span>
      <span class="marquee__text">{% trans "Mediterranean" %}</span>
      <span class="marquee__separator"></span>
      <span class="marquee__text">{% trans "Handcrafted" %}</span>
      <span class="marquee__separator"></span>
    {% endfor %}
  </div>
</div>