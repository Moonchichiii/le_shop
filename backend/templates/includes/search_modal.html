<div x-data="{ open: false }"
    x-cloak
    @open-search.window="open = true; $nextTick(() => $refs.q?.focus())"
    @keydown.escape.window="open = false"
    class="relative z-50"
    x-show="open"
    x-transition.opacity>

  <!-- Backdrop -->
  <div class="fixed inset-0 bg-black/40 backdrop-blur-sm" @click="open = false"></div>

  <!-- Search Box -->
  <div class="fixed inset-x-0 top-0 pt-20 px-4 md:pt-32">
    <div class="max-w-3xl mx-auto bg-white rounded-3xl overflow-hidden shadow-2xl ring-1 ring-black/5"
         x-show="open"
         x-transition:enter="transition ease-out duration-300"
         x-transition:enter-start="-translate-y-8 opacity-0"
         x-transition:enter-end="translate-y-0 opacity-100">

      <form method="get" action="{% url 'product_list' %}" class="relative flex items-center p-2" @submit="open = false">
        
        <!-- Search Icon -->
        <div class="pl-4 text-arti-dark/40">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
        </div>

        <input
          name="q"
          type="search"
          placeholder="Search ceramics, chairs..."
          class="w-full text-xl p-4 outline-none text-arti-dark placeholder-arti-dark/30 font-serif bg-transparent"
          x-ref="q"
          @keydown.enter.stop
          autocomplete="off"
        >

        <!-- Close Button (X Icon) -->
        <button type="button" @click="open = false" class="p-3 text-arti-dark/40 hover:text-red-500 transition rounded-full hover:bg-arti-gray">
          <span class="sr-only">Close</span>
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
        </button>
      </form>

      <!-- Trending Section -->
      <div class="bg-arti-gray/50 p-6 border-t border-arti-dark/5">
        <p class="mb-3 text-[10px] font-bold tracking-widest text-arti-dark/40 uppercase">Trending Now</p>
        <div class="flex gap-2 flex-wrap">
          <a href="{% url 'product_list' %}?q=Vases" class="px-4 py-2 bg-white border border-arti-dark/10 rounded-full text-sm hover:border-arti-accent hover:text-arti-accent transition">Vases</a>
          <a href="{% url 'product_list' %}?q=Oak" class="px-4 py-2 bg-white border border-arti-dark/10 rounded-full text-sm hover:border-arti-accent hover:text-arti-accent transition">Oak</a>
          <a href="{% url 'product_list' %}?q=Bowl" class="px-4 py-2 bg-white border border-arti-dark/10 rounded-full text-sm hover:border-arti-accent hover:text-arti-accent transition">Bowls</a>
        </div>
      </div>

    </div>
  </div>
</div>