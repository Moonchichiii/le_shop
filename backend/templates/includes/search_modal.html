<div x-data="{ open: false }"
    x-cloak
    @open-search.window="open = true; $nextTick(() => $refs.q?.focus())"
    @keydown.escape.window="open = false"
    class="relative z-50"
    x-show="open"
    x-transition.opacity>


  <!-- Backdrop -->
  <div class="fixed inset-0 bg-black/30 backdrop-blur-sm" @click="open = false"></div>

  <!-- Search Box -->
  <div class="fixed inset-x-0 top-0 p-4 md:p-8">
    <div class="max-w-3xl mx-auto bg-white rounded-2xl overflow-hidden shadow-2xl"
         x-show="open"
         x-transition:enter="transition ease-out duration-300"
         x-transition:enter-start="-translate-y-6 opacity-0"
         x-transition:enter-end="translate-y-0 opacity-100">

      <form method="get" action="{% url 'product_list' %}"
            class="relative flex items-center p-4 gap-2"
            @submit="open = false">
        <svg class="w-6 h-6 text-gray-400 ml-2 shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
        </svg>

        <input
          name="q"
          type="search"
          placeholder="Search ceramics, chairs, artists..."
          class="w-full text-lg p-3 outline-none text-arti-dark placeholder-gray-400 font-sans"
          x-ref="q"
          @keydown.enter.stop
          autocomplete="off"
        >

        <button type="submit" class="btn-outline px-5 py-2">Search</button>

        <button type="button" @click="open = false" class="text-gray-400 hover:text-gray-600 px-2">ESC</button>
      </form>

      <div class="bg-gray-50 p-4 border-t border-gray-100 text-sm text-gray-500">
        <p class="mb-2 uppercase tracking-wider text-xs font-bold">Trending</p>
        <div class="flex gap-2 flex-wrap">
          <a href="{% url 'product_list' %}?q=Vases" class="px-3 py-1 bg-white border border-gray-200 rounded-full hover:bg-gray-50">Vases</a>
          <a href="{% url 'product_list' %}?q=Oak" class="px-3 py-1 bg-white border border-gray-200 rounded-full hover:bg-gray-50">Oak Chairs</a>
        </div>
      </div>

    </div>
  </div>
</div>
