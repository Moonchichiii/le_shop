{% extends "base.html" %}
{% load i18n %}

{% block title %}Order Confirmed | Art Leptis{% endblock %}

{% block content %}
<section class="artleptis">
  <div class="mx-auto max-w-2xl px-4 sm:px-6 py-section-sm">

    <!-- Header -->
    <div class="text-center mb-10 reveal-up">
      <span class="label text-signal-500">Success</span>
      <h1 class="headline-serif mt-4 text-4xl sm:text-5xl">Order Confirmed</h1>
      <p class="mt-4 text-ink-60 leading-relaxed max-w-md mx-auto">
        A confirmation has been sent to <span class="font-bold text-ink border-b border-ink/20">{{ order.email }}</span>.
      </p>
    </div>

    <!-- Receipt / Manifest -->
    <div class="border border-rule bg-paper reveal-up">
      
      <!-- Receipt Header -->
      <div class="flex items-start justify-between border-b border-rule p-6 bg-mist/30">
        <div>
          <p class="text-meta mb-1">Order Ref</p>
          <p class="font-serif text-xl">#{{ order.id }}</p>
        </div>
        <div class="text-right">
          <p class="text-meta mb-1">Date</p>
          <p class="font-mono text-sm uppercase tracking-wide">{{ order.created_at|date:"M d, Y" }}</p>
        </div>
      </div>

      <!-- Line Items -->
      <div class="divide-y divide-rule">
        {% for item in order.items.all %}
        <div class="p-6 flex gap-5">
          <!-- Image -->
          <div class="w-16 h-16 shrink-0 bg-mist border border-rule">
             {% if item.product.image %}
               <img src="{{ item.product.image_url_200 }}" class="w-full h-full object-cover" alt="">
             {% endif %}
          </div>
          
          <!-- Details -->
          <div class="flex-1 min-w-0">
            <div class="flex justify-between items-baseline">
              <h3 class="font-serif text-lg leading-tight truncate pr-4">{{ item.product.name }}</h3>
              <p class="font-bold tabular-nums">€{{ item.line_total }}</p>
            </div>
            <p class="text-meta mt-2">QTY: {{ item.qty }}</p>
          </div>
        </div>
        {% endfor %}
      </div>

      <!-- Footer -->
      <div class="bg-ink text-paper p-6 flex justify-between items-center border-t border-ink">
        <p class="text-meta !text-paper/70">Total Paid</p>
        <p class="headline-serif text-2xl">€{{ order.subtotal }}</p>
      </div>
    </div>

    <!-- Actions -->
    <div class="mt-8 flex justify-center reveal-up">
      <a href="{% url 'product_list' %}" class="btn-outline">
        Continue Shopping
      </a>
    </div>

  </div>
</section>
{% endblock %}