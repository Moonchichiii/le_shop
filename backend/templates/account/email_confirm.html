{% extends "base.html" %}
{% load i18n %}

{% block title %}Confirm email | Art Leptis{% endblock %}

{% block content %}
<section class="artleptis">
  <div class="mx-auto max-w-md px-4 sm:px-6 py-section-sm">

    <div class="reveal-up text-center">
      <span class="label">Verification</span>
      <h1 class="headline-serif mt-3 text-4xl">Confirm email</h1>
    </div>

    <div
      class="mt-8 bg-surface shadow-sm p-6 sm:p-8 reveal-up"
      style="border-radius: var(--radius-lg)"
    >
      {% if confirmation %}
        {# ── Icon ── #}
        <div class="flex justify-center mb-5">
          <div
            class="w-12 h-12 bg-blue-50 flex items-center
                   justify-center rounded-full"
          >
            <svg
              class="w-6 h-6 text-blue-600"
              fill="none"
              stroke="currentColor"
              stroke-width="1.5"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M21.75 6.75v10.5a2.25 2.25 0
                   01-2.25 2.25h-15a2.25 2.25 0
                   01-2.25-2.25V6.75m19.5 0A2.25
                   2.25 0 0019.5 4.5h-15a2.25
                   2.25 0 00-2.25 2.25m19.5 0v.243a2.25
                   2.25 0 01-1.07 1.916l-7.5 4.615a2.25
                   2.25 0 01-2.36 0L3.32 8.91a2.25
                   2.25 0 01-1.07-1.916V6.75"
              />
            </svg>
          </div>
        </div>

        <p
          class="text-sm leading-relaxed text-ink-60
                 text-center"
        >
          Please confirm that
          <strong class="text-ink font-semibold">
            {{ confirmation.email_address.email }}
          </strong>
          belongs to you.
        </p>

        <form
          method="post"
          action="{% url 'account_confirm_email' confirmation.key %}"
          class="mt-6"
        >
          {% csrf_token %}
          <button class="btn-primary w-full">
            {% trans "Confirm my email" %}
          </button>
        </form>

        <p class="text-xs text-ink-40 text-center mt-4">
          Once confirmed, you'll be able to sign in using a
          magic login code sent to this address.
        </p>

      {% else %}
        {# ── Expired state ── #}
        <div class="flex justify-center mb-5">
          <div
            class="w-12 h-12 bg-cream flex items-center
                   justify-center rounded-full"
          >
            <svg
              class="w-6 h-6 text-ink-40"
              fill="none"
              stroke="currentColor"
              stroke-width="1.5"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M12 9v3.75m9-.75a9 9 0
                   11-18 0 9 9 0 0118 0zm-9
                   3.75h.008v.008H12v-.008z"
              />
            </svg>
          </div>
        </div>

        <p
          class="text-sm leading-relaxed text-ink-60
                 text-center"
        >
          This confirmation link is invalid or has expired.
          Please sign in to request a new one.
        </p>

        <a
          href="{% url 'account_login' %}"
          class="btn-primary w-full text-center inline-flex
                 justify-center mt-6"
        >
          Back to sign in
        </a>
      {% endif %}
    </div>

  </div>
</section>
{% endblock %}