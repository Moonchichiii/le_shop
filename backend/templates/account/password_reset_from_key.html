{% extends "base.html" %}
{% load i18n %}

{% block title %}Set new password | Art Leptis{% endblock %}

{% block content %}
<section class="artleptis">
  <div class="mx-auto max-w-md px-4 sm:px-6 py-section-sm">

    <div class="reveal-up">
      <span class="label">Account</span>
      <h1 class="headline-serif mt-3 text-4xl">Set new password</h1>
    </div>

    <div class="mt-8 border border-rule bg-paper p-6 sm:p-8 reveal-up">
      {% if token_fail %}
        <span class="text-meta block mb-4">Error â€” Link expired</span>

        <p class="text-sm leading-relaxed text-ink-60">
          This password reset link is invalid or has expired.
        </p>

        <div class="rule mt-6 mb-6"></div>

        <a href="{% url 'account_reset_password' %}" class="btn-primary w-full text-center inline-flex justify-center">
          Request a new link
        </a>
      {% else %}
        <span class="text-meta block mb-4">New credentials</span>

        <form method="post" action="{{ action_url }}" class="space-y-5">
          {% csrf_token %}

          {% if form.non_field_errors %}
            <div class="border border-rule bg-mist p-3">
              <span class="text-meta block mb-1">Error</span>
              <div class="text-sm text-ink-80">{{ form.non_field_errors }}</div>
            </div>
          {% endif %}

          <div>
            <label class="text-meta block mb-2" for="id_password1">{% trans "New password" %}</label>
            {{ form.password1 }}
          </div>

          <div>
            <label class="text-meta block mb-2" for="id_password2">{% trans "Confirm new password" %}</label>
            {{ form.password2 }}
          </div>

          <button class="btn-primary w-full">{% trans "Update password" %}</button>
        </form>
      {% endif %}
    </div>

    <div class="mt-4 flex items-center justify-between">
      <span class="text-meta">SEC. Recovery</span>
      <span class="text-meta">Art Leptis</span>
    </div>

  </div>
</section>
{% endblock %}