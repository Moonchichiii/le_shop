{% load i18n static %}

<section class="relative bg-paper" aria-label="{% trans 'Featured collection' %}">

  {# HERO CONTENT #}
  <div class="px-6 md:px-12 lg:px-20 pt-6 md:pt-12 lg:pt-16">

    <div class="grid grid-cols-1 lg:grid-cols-12 gap-8 lg:gap-10 items-end">

      {# ── Image: 8 cols ── #}
      <div class="lg:col-span-8 relative">
        <div
          id="hero-carousel"
          class="plate relative w-full overflow-hidden
                 cursor-grab active:cursor-grabbing touch-none reveal-scale"
          style="border-radius: var(--radius-xl)"
        >
          <div class="relative aspect-[4/5] md:aspect-[16/10]">

            {% if hero_slides %}
              {% for slide in hero_slides %}
                <div
                  class="hero-slide absolute inset-0 h-full w-full
                         {% if forloop.first %}z-10 opacity-100 visible{% else %}opacity-0 invisible{% endif %}"
                  data-caption="{{ slide.title|default:slide.alt_text }}"
                >
                  <img
                    src="{{ slide.image_url }}"
                    alt="{{ slide.alt_text }}"
                    class="h-full w-full object-cover object-center"
                    style="border-radius: var(--radius-xl)"
                    width="1400" height="1750"
                    loading="{% if forloop.first %}eager{% else %}lazy{% endif %}"
                    fetchpriority="{% if forloop.first %}high{% else %}auto{% endif %}"
                  >
                </div>
              {% endfor %}

              {# Navigation dots — softer #}
              {% if hero_slides|length > 1 %}
                <div class="absolute bottom-5 right-5 flex gap-2 z-20">
                  {% for slide in hero_slides %}
                    <div class="nav-dot w-2.5 h-2.5 rounded-full bg-white/70
                                shadow transition-all duration-300
                                {% if forloop.first %}opacity-100 scale-110{% else %}opacity-50{% endif %}">
                    </div>
                  {% endfor %}
                </div>
              {% endif %}

              {# Slide controls — minimal #}
              {% if hero_slides|length > 1 %}
                <div id="hero-controls"
                     class="absolute bottom-5 left-5 flex items-center gap-2 z-20">
                  <button data-hero="prev"
                    class="w-10 h-10 flex items-center justify-center
                           bg-white/80 backdrop-blur-sm rounded-full
                           hover:bg-white transition shadow-sm"
                    aria-label="{% trans 'Previous slide' %}">
                    <svg width="16" height="16" fill="none"
                         stroke="currentColor" stroke-width="1.5">
                      <path d="M10 3L5 8l5 5"/>
                    </svg>
                  </button>
                  <span id="hero-counter"
                        class="text-xs font-medium text-white/80 px-2 tabular-nums">
                    1 / {{ hero_slides|length }}
                  </span>
                  <button data-hero="next"
                    class="w-10 h-10 flex items-center justify-center
                           bg-white/80 backdrop-blur-sm rounded-full
                           hover:bg-white transition shadow-sm"
                    aria-label="{% trans 'Next slide' %}">
                    <svg width="16" height="16" fill="none"
                         stroke="currentColor" stroke-width="1.5">
                      <path d="M6 3l5 5-5 5"/>
                    </svg>
                  </button>
                </div>
              {% endif %}

            {% else %}
              <div class="absolute inset-0 flex items-center justify-center
                          bg-cream text-ink-40">
                <p class="text-sm">{% trans "No slides active" %}</p>
              </div>
            {% endif %}

          </div>
        </div>
      </div>

      {# ── Copy: 4 cols ── #}
      <div class="lg:col-span-4 flex flex-col justify-end gap-8 pb-4 reveal-up">

        <h1 class="hero-title">
          {% trans "Handcrafted with care for memorable moments" %}
        </h1>

        <p class="hero-copy">
          {% trans "Unique lamps and objects crafted from driftwood and stone — modern forms, old-world patience." %}
        </p>

        <div class="flex flex-col sm:flex-row gap-3">
          <a href="{% url 'products:product_list' %}" class="btn-primary">
            {% trans "Shop Collection" %}
            <svg class="w-4 h-4" fill="none" stroke="currentColor"
                 stroke-width="2" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round"
                    d="M17 8l4 4m0 0l-4 4m4-4H3"/>
            </svg>
          </a>
          <a href="#story" class="btn-outline">
            {% trans "Our Story" %}
          </a>
        </div>

        {% if hero_slides %}
          <div class="border-t border-rule pt-4 mt-2">
            <span class="hero-caption__label">{% trans "Now Showing" %}</span>
            <span id="hero-caption-text" class="hero-caption__value">
              {{ hero_slides.0.title }}
            </span>
          </div>
        {% endif %}
      </div>

    </div>
  </div>

  <div class="h-12 md:h-20 lg:h-24"></div>
</section>

{# MARQUEE #}
<div class="marquee" aria-hidden="true">
  <div class="marquee__track">
    {% for _ in "123456" %}
      <span class="marquee__text">{% trans "Driftwood" %}</span>
      <span class="marquee__separator"></span>
      <span class="marquee__text">{% trans "Sculpture" %}</span>
      <span class="marquee__separator"></span>
      <span class="marquee__text">{% trans "Mediterranean" %}</span>
      <span class="marquee__separator"></span>
      <span class="marquee__text">{% trans "Handcrafted" %}</span>
      <span class="marquee__separator"></span>
    {% endfor %}
  </div>
</div>