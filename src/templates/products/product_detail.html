{% extends "base.html" %}

{% block title %}{{ product.name }} | Arti Corner{% endblock %}

{% block content %}
<div class="mx-auto max-w-6xl px-4 sm:px-6 py-12">
  <a href="{% url 'product_list' %}" class="text-sm underline opacity-70 hover:opacity-100">Back to shop</a>

  <div class="mt-6 grid gap-10 md:grid-cols-2">
    <div class="rounded-3xl overflow-hidden bg-arti-dark/5">
      <img
        src="{{ cloudinary_url(product.image, 320, '4:3') }}"
        srcset="
          {{ cloudinary_url(product.image, 320, '4:3') }} 320w,
          {{ cloudinary_url(product.image, 640, '4:3') }} 640w,
          {{ cloudinary_url(product.image, 1024, '4:3') }} 1024w
        "
        sizes="(max-width: 640px) 100vw, 50vw"
        loading="lazy"
        alt="{{ product.image_alt }}"
        class="w-full h-auto block"
      >

    </div>

    <div>
      <p class="text-xs font-bold tracking-[0.22em] text-arti-dark/60 uppercase">{{ product.category.name }}</p>
      <h1 class="headline-serif mt-3 text-5xl">{{ product.name }}</h1>

      <p class="mt-5 text-sm leading-relaxed opacity-70">{{ product.description }}</p>

      <div class="mt-8 flex items-center justify-between">
        <p class="headline-serif text-3xl">â‚¬{{ product.price }}</p>
        {% if product.is_in_stock %}
          <span class="text-xs uppercase tracking-widest opacity-60">In stock</span>
        {% else %}
          <span class="text-xs uppercase tracking-widest text-red-600">Sold out</span>
        {% endif %}
      </div>

      <div class="mt-8">
        {% if product.is_in_stock %}
          <form method="post" action="{% url 'cart_add' product.id %}" class="flex flex-col sm:flex-row gap-3 sm:items-center">
            {% csrf_token %}
            <input
  name="qty"
  type="number"
  min="1"
  max="{{ product.stock }}"
  value="1"
  class="w-full sm:w-28 rounded-2xl border border-arti-dark/15 px-4 py-3 text-sm"
/>

            <button class="btn-primary bg-primary-500 hover:bg-primary-600 text-white w-full sm:w-auto">Add to cart</button>
            <a href="{% url 'cart_detail' %}" class="btn-outline w-full sm:w-auto">View cart</a>
          </form>
        {% else %}
          <button class="btn-outline w-full" disabled>Sold out</button>
        {% endif %}
      </div>
    </div>
  </div>
</div>
{% endblock %}
